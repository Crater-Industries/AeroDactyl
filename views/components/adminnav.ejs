<!-- Begin loading resources -->
<script src="https://cdn.jsdelivr.net/npm/alertifyjs@1.13.1/build/alertify.min.js"></script>
<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/alertifyjs@1.13.1/build/css/alertify.min.css" />
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/nanobar/0.4.2/nanobar.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/alpinejs/3.13.10/cdn.js" integrity="sha512-HmVkzN2y1iKGh8xS5D39FSs+D1rCvY/dM5A2T7pSGyJlqzrML1X0dgyx3ynSnWbTuKlL8i6V8XQdmu+CnguiRg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<style>
  .alertify-notifier .ajs-message.ajs-success {
    color: #71747a;
    padding: 13px 7px;
    background: #e5e7eb;
    border-radius: 24px;
    text-align: center;
    font-weight: 500;
  }
</style>
<style>
  .spinner {
    position: fixed;
    top: 10px;
    right: 10px;
    width: 30px;
    border: 3px solid #474c55;
    border-radius: 50%;
    border-top: 3px solid white;
    width: 22px;
    height: 22px;
    -webkit-animation: spin 0.5s linear infinite;
    animation: spin 0.5s linear infinite;
    opacity: 0;
    transition: opacity 0.5s;
  }

  @-webkit-keyframes spin {
    0% { -webkit-transform: rotate(0deg); }
    100% { -webkit-transform: rotate(360deg); }
  }

  @keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
  }
</style>
<div id="spinner" class="hidden spinner mt-2 mr-2"></div>

<button type="button" id="mobile-menu-button" class="md:hidden fixed top-4 left-4 z-50 text-gray-400 hover:text-white focus:outline-none bg-[#0f1923]/80 backdrop-blur-sm p-2 rounded-lg">
  <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
    <path stroke-linecap="round" stroke-linejoin="round" d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5" />
  </svg>
</button>

<div id="sidebar" class="transform -translate-x-full md:translate-x-0 transition-transform duration-300 ease-in-out md:flex md:w-64 md:flex-col md:fixed md:inset-y-0 z-40">
  <div class="flex-1 flex flex-col min-h-0 object-cover bg-[#0f1923] md:bg-transparent border-dashed border-r-2 border-[#162027]">
    <div class="flex-1 flex flex-col p-4 overflow-y-auto">
      <div class="md:hidden flex justify-end mb-2">
        <button type="button" id="close-sidebar-button" class="text-gray-400 hover:text-white focus:outline-none">
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
            <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
          </svg>
        </button>
      </div>

      <div class="flex items-center mb-6 pl-4 pt-4">
        <div class="w-10 h-10 rounded-lg flex items-center justify-center mr-3">
          <img src="<%= settings.logo %>" alt="<%= settings.name %> Logo" class="h-full w-auto object-contain">
        </div>
        <span class="text-white text-xl font-semibold"><%= settings.name %> Admin</span>
      </div>
      
      <div class="border-t border-[#162027] mb-6"></div>

      <nav class="hs-accordion-group navbar-nav flex-1 space-y-2 px-2" data-hs-accordion-always-open>
        <div class="mb-6">
          <span class="uppercase text-gray-400 tracking-widest text-xs pb-3 block">ADMIN PANEL</span>
          
          <a href="../admin" class="nav-link transition text-gray-400 backdrop-blur hover:text-white group flex items-center px-3 py-2 text-sm font-medium rounded-lg mb-1">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-5 mr-3">
              <path stroke-linecap="round" stroke-linejoin="round" d="M14.25 9.75 16.5 12l-2.25 2.25m-4.5 0L7.5 12l2.25-2.25M6 20.25h12A2.25 2.25 0 0 0 20.25 18V6A2.25 2.25 0 0 0 18 3.75H6A2.25 2.25 0 0 0 3.75 6v12A2.25 2.25 0 0 0 6 20.25Z" />
            </svg>
            Dashboard
          </a>
          
          <a href="../admin/user" class="nav-link transition text-gray-400 backdrop-blur hover:text-white group flex items-center px-3 py-2 text-sm font-medium rounded-lg mb-1">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-5 mr-3">
              <path stroke-linecap="round" stroke-linejoin="round" d="M15 19.128a9.38 9.38 0 0 0 2.625.372 9.337 9.337 0 0 0 4.121-.952 4.125 4.125 0 0 0-7.533-2.493M15 19.128v-.003c0-1.113-.285-2.16-.786-3.07M15 19.128v.106A12.318 12.318 0 0 1 8.624 21c-2.331 0-4.512-.645-6.374-1.766l-.001-.109a6.375 6.375 0 0 1 11.964-3.07M12 6.375a3.375 3.375 0 1 1-6.75 0 3.375 3.375 0 0 1 6.75 0Zm8.25 2.25a2.625 2.625 0 1 1-5.25 0 2.625 2.625 0 0 1 5.25 0Z" />
            </svg>
            User Management
          </a>
          
          <a href="../admin/server" class="nav-link transition text-gray-400 backdrop-blur hover:text-white group flex items-center px-3 py-2 text-sm font-medium rounded-lg mb-1">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-5 mr-3">
              <path stroke-linecap="round" stroke-linejoin="round" d="M5.25 14.25h13.5m-13.5 0a3 3 0 0 1-3-3m3 3a3 3 0 1 0 0 6h13.5a3 3 0 1 0 0-6m-16.5-3a3 3 0 0 1 3-3h13.5a3 3 0 0 1 3 3m-19.5 0a4.5 4.5 0 0 1 .9-2.7L5.737 5.1a3.375 3.375 0 0 1 2.7-1.35h7.126c1.062 0 2.062.5 2.7 1.35l2.587 3.45a4.5 4.5 0 0 1 .9 2.7m0 0a3 3 0 0 1-3 3m0 3h.008v.008h-.008v-.008Zm0-6h.008v.008h-.008v-.008Zm-3 6h.008v.008h-.008v-.008Zm0-6h.008v.008h-.008v-.008Z" />
            </svg>
            Server Management
          </a>
        </div>
        
        <div class="mb-6">
          <span class="uppercase text-gray-400 tracking-widest text-xs pb-3 block">RESOURCES</span>
          
          <a href="/admin/resource" class="nav-link transition text-gray-400 backdrop-blur hover:text-white group flex items-center px-3 py-2 text-sm font-medium rounded-lg mb-1">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-5 mr-3">
              <path stroke-linecap="round" stroke-linejoin="round" d="M20.25 6.375c0 2.278-3.694 4.125-8.25 4.125S3.75 8.653 3.75 6.375m16.5 0c0-2.278-3.694-4.125-8.25-4.125S3.75 4.097 3.75 6.375m16.5 0v11.25c0 2.278-3.694 4.125-8.25 4.125s-8.25-1.847-8.25-4.125V6.375m16.5 0v3.75m-16.5-3.75v3.75m16.5 0v3.75C20.25 16.153 16.556 18 12 18s-8.25-1.847-8.25-4.125v-3.75m16.5 0c0 2.278-3.694 4.125-8.25 4.125s-8.25-1.847-8.25-4.125" />
            </svg>
            Resource allocate
          </a>
          
          <a href="/admin/coins" class="nav-link transition text-gray-400 backdrop-blur hover:text-white group flex items-center px-3 py-2 text-sm font-medium rounded-lg mb-1">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-5 mr-3">
              <path stroke-linecap="round" stroke-linejoin="round" d="M12 6v12m-3-2.818.879.659c1.171.879 3.07.879 4.242 0 1.172-.879 1.172-2.303 0-3.182C13.536 12.219 12.768 12 12 12c-.725 0-1.45-.22-2.003-.659-1.106-.879-1.106-2.303 0-3.182s2.9-.879 4.006 0l.415.33M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z" />
            </svg>
            Coin Management
          </a>
        </div>
        
        <div class="mb-6">
          <span class="uppercase text-gray-400 tracking-widest text-xs pb-3 block">SETTINGS</span>
          
          <a href="../admin/settings" class="nav-link transition text-gray-400 backdrop-blur hover:text-white group flex items-center px-3 py-2 text-sm font-medium rounded-lg mb-1">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-5 mr-3">
              <path stroke-linecap="round" stroke-linejoin="round" d="M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 0 1 1.37.49l1.296 2.247a1.125 1.125 0 0 1-.26 1.431l-1.003.827c-.293.241-.438.613-.43.992a7.723 7.723 0 0 1 0 .255c-.008.378.137.75.43.991l1.004.827c.424.35.534.955.26 1.43l-1.298 2.247a1.125 1.125 0 0 1-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.47 6.47 0 0 1-.22.128c-.331.183-.581.495-.644.869l-.213 1.281c-.09.543-.56.94-1.11.94h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 0 1-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 0 1-1.369-.49l-1.297-2.247a1.125 1.125 0 0 1 .26-1.431l1.004-.827c.292-.24.437-.613.43-.991a6.932 6.932 0 0 1 0-.255c.007-.38-.138-.751-.43-.992l-1.004-.827a1.125 1.125 0 0 1-.26-1.43l1.297-2.247a1.125 1.125 0 0 1 1.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.086.22-.128.332-.183.582-.495.644-.869l.214-1.28Z" />
              <path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z" />
            </svg>
            System Settings
          </a>
          
          <a href="../admin/logs" class="nav-link transition text-gray-400 backdrop-blur hover:text-white group flex items-center px-3 py-2 text-sm font-medium rounded-lg">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-5 mr-3">
              <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z" />
            </svg>
            System Logs
          </a>
        </div>
      </nav>
    </div>
    
    <div class="border-t border-[#162027] pt-4 pb-4 px-4 mt-auto">
      <a href="/dashboard" class="text-gray-400 hover:text-white flex items-center mb-2 text-xs">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4 mr-1">
          <path stroke-linecap="round" stroke-linejoin="round" d="M9 15 3 9m0 0 6-6M3 9h12a6 6 0 0 1 0 12h-3" />
        </svg>
        <span>Return to Dashboard</span>
      </a>
      
      <a href="/panel" class="text-gray-400 hover:text-white flex items-center text-xs">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4 mr-1">
          <path stroke-linecap="round" stroke-linejoin="round" d="M13.5 6H5.25A2.25 2.25 0 0 0 3 8.25v10.5A2.25 2.25 0 0 0 5.25 21h10.5A2.25 2.25 0 0 0 18 18.75V10.5m-10.5 6L21 3m0 0h-5.25M21 3v5.25" />
        </svg>
        <span>Pterodactyl Panel</span>
      </a>
    </div>
  </div>
</div>

<div id="sidebar-overlay" class="fixed inset-0 bg-black bg-opacity-50 z-30 hidden md:hidden"></div>

<script>
  document.addEventListener("DOMContentLoaded", function() {
    // Mobile menu functionality
    const sidebar = document.getElementById('sidebar');
    const mobileMenuButton = document.getElementById('mobile-menu-button');
    const closeSidebarButton = document.getElementById('close-sidebar-button');
    const sidebarOverlay = document.getElementById('sidebar-overlay');
    
    function openSidebar() {
      sidebar.classList.remove('-translate-x-full');
      sidebarOverlay.classList.remove('hidden');
      document.body.classList.add('overflow-hidden');
    }
    
    function closeSidebar() {
      sidebar.classList.add('-translate-x-full');
      sidebarOverlay.classList.add('hidden');
      document.body.classList.remove('overflow-hidden');
    }
    
    mobileMenuButton.addEventListener('click', openSidebar);
    closeSidebarButton.addEventListener('click', closeSidebar);
    sidebarOverlay.addEventListener('click', closeSidebar);
    
    // Close sidebar when clicking a link on mobile
    const navLinks = document.querySelectorAll('.nav-link');
    navLinks.forEach(link => {
      link.addEventListener('click', function() {
        if (window.innerWidth < 768) {
          closeSidebar();
        }
      });
    });
    
    // Active link highlighting
    var currentPageUrl = window.location.pathname;
    
    // Loop through each navigation link
    navLinks.forEach(function(link) {
      // Get the href attribute of the link
      var linkUrl = link.getAttribute('href');
      
      // Convert relative paths to absolute paths for comparison
      var absoluteLinkPath = linkUrl.replace('../', '/');
      
      // For exact matching, we need to compare the paths directly
      if (currentPageUrl === absoluteLinkPath || 
          // Special case for admin dashboard (to handle both /admin and /admin/)
          (absoluteLinkPath === '/admin' && (currentPageUrl === '/admin' || currentPageUrl === '/admin/'))) {
        // Remove all existing classes
        link.className = 'nav-link';
        
        // Add the specified classes
        link.classList.add(
          'transition',
          'text-[#0a9875]',
          'bg-[#0a9875]/5',
          'shadow',
          'group',
          'flex',
          'items-center',
          'px-3',
          'py-2',
          'text-sm',
          'font-semibold',
          'rounded-lg'
        );
      }
    });
    
    // Handle window resize
    window.addEventListener('resize', function() {
      if (window.innerWidth >= 768) {
        sidebar.classList.remove('-translate-x-full');
        sidebarOverlay.classList.add('hidden');
        document.body.classList.remove('overflow-hidden');
      } else if (!sidebar.classList.contains('-translate-x-full')) {
        // If sidebar is open on mobile and window is resized to mobile
        closeSidebar();
      }
    });
  });
</script>

<script>
  var options = {
    classname: 'loadingbar',
    id: 'loadingbar'
  };
  var nanobar = new Nanobar(options);
  // Show the spinner with a smooth transition
  var spinner = document.getElementById('spinner');
  spinner.style.opacity = '1';
  // Simulate a slower loading progress
  function simulateLoading() {
    nanobar.go(10); // Change this value to control the loading speed
    setTimeout(function() {
      nanobar.go(50);
    }, 190); // Delay the progress update
    setTimeout(function() {
      nanobar.go(100);
      // Hide the spinner with a smooth transition
      spinner.style.opacity = '0';
    }, 400); // Another delay
  }
  simulateLoading();
</script>
<style>
  .loadingbar .bar {
    background: #0a9875;
    -webkit-box-shadow: 0px 4px 38px -15px #0a9875;
    -moz-box-shadow: 0px 4px 38px -15px #0a9875;
    box-shadow: 0px 4px 38px -15px #0a9875;
    height: 1.85px;
  }
</style>
<style>
  #skeleton-loader {
    display: none;
  }

  #skeleton-loader.active {
    display: block;
  }
</style>
<script>
  document.addEventListener("DOMContentLoaded", function() {
    // Get references to the skeleton loader and content elements
    const skeletonLoader = document.getElementById("skeleton-loader");
    const content = document.getElementById("content");

    // Function to show the skeleton loader and hide the content
    function showSkeletonLoader() {
      skeletonLoader.classList.add("active");
      content.style.display = "none";
    }

    // Function to hide the skeleton loader and show the content
    function hideSkeletonLoader() {
      skeletonLoader.classList.remove("active");
      content.style.display = "block";
    }

    // Show the skeleton loader immediately (initial state)
    showSkeletonLoader();
    setTimeout(hideSkeletonLoader, 250);
  });
</script>
<script src="./preline/dist/preline.js"></script>
